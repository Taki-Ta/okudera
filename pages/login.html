<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon.ico">
  <link rel="icon" type="image/png" href="./assets/img/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>Anchor Bootstrap 4.1.3 UI Kit by WowThemesNet</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />


  <!-- Google Font -->

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

  <!-- Main CSS -->
  <link href="../assets/css/main.css" rel="stylesheet" />

  <!-- Animation CSS -->
  <link href="../assets/css/vendor/aos.css" rel="stylesheet" />

</head>

<body>
  <!-- Main -->
  <div class="d-md-flex h-md-100 align-items-center">
    <div class="col-md-6 p-0 bg-indigo h-md-100">
      <div class="text-white d-md-flex align-items-center h-100 p-5 text-center justify-content-center">
        <div class="logoarea pt-5 pb-5">
          <p>
            <i class="fa fa-anchor fa-3x"></i>
          </p>
          <h1 class="mb-0 mt-3 display-4">Anchor</h1>
          <h5 class="mb-4 font-weight-light">Free Bootstrap UI Kit with <i class="fab fa-sass fa-2x text-cyan"></i></h5>

        </div>
      </div>
    </div>
    <div x-data="loginForm()" class="col-md-6 p-0 bg-white h-md-100 loginarea">
      <div class="d-md-flex align-items-center h-md-100 p-5 justify-content-center">
        <form class="border rounded p-5" x-on:submit.prevent="submit">
          <h3 class="mb-4 text-center">Sign In</h3>
          <div class="form-group">
            <input type="text" x-model="username" @input="hasError=false" class="form-control" id="exampleInputEmail1"
              aria-describedby="emailHelp" placeholder="UserName" required="">
          </div>
          <div class="form-group">
            <input type="password" x-model="password" @input="hasError=false" class="form-control"
              id="exampleInputPassword1" placeholder="Password" required="">
          </div>
          <span x-text="errorMsg" class="login-error-msg" x-show="hasError"></span>
          <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label small text-muted" for="exampleCheck1">Remember me</label>
            <!-- todo: add remember me functionality -->
          </div>
          <button type="submit" class="btn btn-success btn-round btn-block shadow-sm">Sign in</button>
          <small class="d-block mt-4 text-center"><a class="text-gray" href="#">Forgot your password?</a></small>
        </form>
      </div>
    </div>
  </div>
  <!-- End Main -->




  <!--------------------------------------
JAVASCRIPTS
--------------------------------------->
  <script src="../assets/js/vendor/jquery.min.js" type="text/javascript"></script>
  <script src="../assets/js/vendor/popper.min.js" type="text/javascript"></script>
  <script src="../assets/js/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="../assets/js/functions.js" type="text/javascript"></script>
  <script src="../assets/js/alpinejs.js" defer></script>


  <!-- Animation -->
  <script src="../assets/js/vendor/aos.js" type="text/javascript"></script>
  <script>

    function loginForm() {
      return {
        username: "",
        password: "",
        isLoggedIn: false,
        userList: "",
        hasError: false,
        errorMsg: "",
        async submit() {
          try {
            const response = await fetch("/api/login", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                username: this.username,
                password: this.password,
              }),
            });
            if (!response.ok) {
              const data = await response.json();
              console.log(data);
              throw new Error(`${data.msg}`);
            }
            location.reload();
          } catch (error) {
            this.hasError = true;
            this.errorMsg = error.message;
          }
        },
      };
    }
  </script>
  <noscript>
    <style>
      *[data-aos] {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    </style>
  </noscript>
  <script>
    AOS.init({
      duration: 700
    });
  </script>

  <!-- Disable animation on less than 1200px, change value if you like -->
  <script>
    AOS.init({
      disable: function () {
        var maxWidth = 1200;
        return window.innerWidth < maxWidth;
      }
    });
  </script>

</body>

</html>